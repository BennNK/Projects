

int malwareB()
{
    kprintf("\nhijack suceeded\n");

  //int(*fptr)()=&myProgA;


  //kprintf("\n&myprogA=0x%8x\n",fptr);

//   __asm__(
//   movl %esp, %ebp
//   movl $0x1058a9, %ebp+4
//   )


register int j asm("ebp");
int* ret_add=j+4;//return address of malwareB

//kprintf("\nebp of malwareB is 0x%8x\n",j);
//kprintf("\nstack frame of ret_add of malwareB is 0x%8x\n",ret_add);
//kprintf("\nret_add of malwareB is 0x%8x\n",*ret_add);

*ret_add=0x1058a9;

    return 1;
}